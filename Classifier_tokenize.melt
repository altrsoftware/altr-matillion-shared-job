{"objects":[{"metadata":{"identifier":{"packageName":"altr.sharedjob.tokenize","name":"Classifier_tokenize","revision":1,"type":"DYNAMIC"},"rootJobReference":{"name":"Get Cols to Tokenize","type":"ORCHESTRATION","parameterMetadata":[{"slot":2,"variableName":"database","variableType":"SCALAR","displayName":"database","description":"Name of the database that the table to tokenize/protect is located in","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":3,"variableName":"schema","variableType":"SCALAR","displayName":"schema","description":"Name of the schema that the table to tokenize/protect is located in","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":4,"variableName":"table","variableType":"SCALAR","displayName":"table","description":"Name of the table to tokenize/protect","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":5,"variableName":"ef_database","variableType":"SCALAR","displayName":"ef_database","description":"Database that the external functions to tokenize/detokenize are located in","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":6,"variableName":"ef_schema","variableType":"SCALAR","displayName":"ef_schema","description":"Schema that the external functions to tokenize/detokenize are located in","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":7,"variableName":"ef_tokenize_name","variableType":"SCALAR","displayName":"ef_tokenize_name","description":"Name of the Tokenization external function","defaultValue":[{"values":{"1":"ALTR_TOKENIZE"}}],"defaultValueType":"TEXT","required":true},{"slot":8,"variableName":"ef_detokenize_name","variableType":"SCALAR","displayName":"ef_detokenize_name","description":"Name of the Detokenization external function","defaultValue":[{"values":{"1":"ALTR_DETOKENIZE"}}],"defaultValueType":"TEXT","required":true},{"slot":9,"variableName":"ALTR_api_key","variableType":"SCALAR","displayName":"ALTR_api_key","description":"","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":10,"variableName":"ALTR_api_secret_name","variableType":"SCALAR","displayName":"ALTR_api_secret_name","description":"Name of the Project Group Password for the ALTR api secret key   - generated in Settings -> Preferences -> API","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":11,"variableName":"snowflake_hostname","variableType":"SCALAR","displayName":"snowflake_hostname","description":"Your Snowflake hostname in the format \"example.snowflakecomputing.com\"","defaultValue":[{"values":{"1":"example.snowflakecomputing.com"}}],"defaultValueType":"TEXT","required":true},{"slot":12,"variableName":"Altr_service_user_name","variableType":"SCALAR","displayName":"Altr_service_user_name","description":"The Snowflake username of the ALTR service user","defaultValue":[{"values":{"1":"ALTR_SERVICE_USER"}}],"defaultValueType":"TEXT","required":true},{"slot":13,"variableName":"Altr_service_user_password","variableType":"SCALAR","displayName":"Altr_service_user_password","description":"Name of the Project Group Password for the ALTR service user","defaultValue":[{"values":{"1":""}}],"defaultValueType":"TEXT","required":true},{"slot":14,"variableName":"Classifiers_to_tokenize","variableType":"GRID","displayName":"Classifiers_to_tokenize","description":"Classifiers: \"US_PASSPORT\",\"US_SOCIAL_SECURITY_NUMBER\",\"US_STATE\",\"VEHICLE_IDENTIFICATION_NUMBER\",\"US_DRIVERS_LICENSE_NUMBER\",\"US_EMPLOYER_IDENTIFICATION_NUMBER\",\"US_INDIVIDUAL_TAXPAYER_IDENTIFICATION_NUMBER\",\"ICD9_CODE\", \"ICD10_CODE\",\"IP_ADDRESS\", \"LOCATION\", \"MAC_ADDRESS\", \"PASSPORT\", \"PHONE_NUMBER\", \"STREET_ADDRESS\",\"CREDIT_CARD_TRACK_NUMBER\", \"DATE_OF_BIRTH\", \"DATE\", \"FIRST_NAME\", \"LAST_NAME\", \"PHONE_NUMBER\", \"EMAIL_ADDRESS\", \"CREDIT_CARD_NUMBER\", \"PERSON_NAME\"","defaultValue":[{"values":{"1":""}}],"defaultValueType":null,"required":true}]},"orchestrationJobs":["Get Cols to Tokenize","Add and Tokenize"],"transformationJobs":[],"imageMetadata":{"componentIcon":"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABYklEQVR42mNgoAwYAnEYwwCC9UB8BYiZB8JyIyD+C8T/gTh8IBywAWo5CF+mdygYA/E/JAeAcCg9HbAJzXIQvgTETPSw3BSL72E4hB4O2IzDchC+SOtQkMLje7qFwh4CDqB5KNgSEQpBtA6F3QQccB6IGWnpAGsiQiGQ1qGwk4ADztE6LRATCv4DHQpnKE0LhCoYSyJCwY8SB8wHYg4CarYTEQpkpQU7qO9yqBAKvuQ4YC9U82MiQmEbAQecJjUt2KP5KpeAenMiQsGHFAfsQ9P8BIg5CejZSsABJ4kNBQccvskjoM+MiFDwJsYBB3BofkpEKGwh4IAThELBiYABBRS0lmDYE58BBwloXkVhiwmEj+MKBWcCGkE+MyHCASZEhIIHNo2HCWjaRGGrGW8ouBLheyMK+w14Q+EIAcUbyChJNxIw8xgsFNwIKPwL7QVT0nfEhUF2MxwloGgdlfqP2PBRAHwgR8SToKRTAAAAAElFTkSuQmCC","smallIcon":"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAArUlEQVR42mNgwA8sgNibgQKwA4hPATEjOZotgfg/FHuRY8BOJANOkqqZHYjfIRkAwp6kGlKHZsAJUg3gB+K3aIZ4kGpIDZoBxwhp0ARiJiQ+HxZXuOMzYB8Qh6GJVRPrCgeogitYXPEGzRA3bAbsR1IQjiZXhWbAEXTNjgScyYvFFS7ICg6iSVZicWElmprDMAknNInXUBsZsLjiNZpaZ5DEITTBcjyxVIGm9hAAswVR7aC5TiAAAAAASUVORK5CYII="},"description":"Tokenize and land in immediately apply policy to allow detokenization","helpHtml":"<div class=\"mtln\"><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABYklEQVR42mNgoAwYAnEYwwCC9UB8BYiZB8JyIyD+C8T/gTh8IBywAWo5CF+mdygYA/E/JAeAcCg9HbAJzXIQvgTETPSw3BSL72E4hB4O2IzDchC+SOtQkMLje7qFwh4CDqB5KNgSEQpBtA6F3QQccB6IGWnpAGsiQiGQ1qGwk4ADztE6LRATCv4DHQpnKE0LhCoYSyJCwY8SB8wHYg4CarYTEQpkpQU7qO9yqBAKvuQ4YC9U82MiQmEbAQecJjUt2KP5KpeAenMiQsGHFAfsQ9P8BIg5CejZSsABJ4kNBQccvskjoM+MiFDwJsYBB3BofkpEKGwh4IAThELBiYABBRS0lmDYE58BBwloXkVhiwmEj+MKBWcCGkE+MyHCASZEhIIHNo2HCWjaRGGrGW8ouBLheyMK+w14Q+EIAcUbyChJNxIw8xgsFNwIKPwL7QVT0nfEhUF2MxwloGgdlfqP2PBRAHwgR8SToKRTAAAAAElFTkSuQmCC\"><h3>Classifier_tokenize</h3><p style='white-space: pre-line; word-wrap: break-word;'>Tokenize and land in immediately apply policy to allow detokenization</p><h3>Properties</h3><table><tbody><tr><th>Property</th><th>Type</th><th>Description</th></tr><tr><td>database</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Name of the database that the table to tokenize/protect is located in</td></tr><tr><td>schema</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Name of the schema that the table to tokenize/protect is located in</td></tr><tr><td>table</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Name of the table to tokenize/protect</td></tr><tr><td>ef_database</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Database that the external functions to tokenize/detokenize are located in</td></tr><tr><td>ef_schema</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Schema that the external functions to tokenize/detokenize are located in</td></tr><tr><td>ef_tokenize_name</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Name of the Tokenization external function</td></tr><tr><td>ef_detokenize_name</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Name of the Detokenization external function</td></tr><tr><td>ALTR_api_key</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'></td></tr><tr><td>ALTR_api_secret_name</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Name of the Project Group Password for the ALTR api secret key   - generated in Settings -&gt; Preferences -&gt; API</td></tr><tr><td>snowflake_hostname</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Your Snowflake hostname in the format &quot;example.snowflakecomputing.com&quot;</td></tr><tr><td>Altr_service_user_name</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>The Snowflake username of the ALTR service user</td></tr><tr><td>Altr_service_user_password</td><td>Variable</td><td style='white-space: pre-line; word-wrap: break-word;'>Name of the Project Group Password for the ALTR service user</td></tr><tr><td>Classifiers_to_tokenize</td><td>Grid</td><td style='white-space: pre-line; word-wrap: break-word;'>Classifiers: &quot;US_PASSPORT&quot;,&quot;US_SOCIAL_SECURITY_NUMBER&quot;,&quot;US_STATE&quot;,&quot;VEHICLE_IDENTIFICATION_NUMBER&quot;,&quot;US_DRIVERS_LICENSE_NUMBER&quot;,&quot;US_EMPLOYER_IDENTIFICATION_NUMBER&quot;,&quot;US_INDIVIDUAL_TAXPAYER_IDENTIFICATION_NUMBER&quot;,&quot;ICD9_CODE&quot;, &quot;ICD10_CODE&quot;,&quot;IP_ADDRESS&quot;, &quot;LOCATION&quot;, &quot;MAC_ADDRESS&quot;, &quot;PASSPORT&quot;, &quot;PHONE_NUMBER&quot;, &quot;STREET_ADDRESS&quot;,&quot;CREDIT_CARD_TRACK_NUMBER&quot;, &quot;DATE_OF_BIRTH&quot;, &quot;DATE&quot;, &quot;FIRST_NAME&quot;, &quot;LAST_NAME&quot;, &quot;PHONE_NUMBER&quot;, &quot;EMAIL_ADDRESS&quot;, &quot;CREDIT_CARD_NUMBER&quot;, &quot;PERSON_NAME&quot;</td></tr></tbody></table></div>","created":1677162066664},"orchestrationJobs":{"Get Cols to Tokenize":{"id":-2,"revision":642,"created":1677161977206,"timestamp":1677161977206,"components":{"5277":{"id":5277,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-480,"y":32,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[6453],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Start","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5278":{"id":5278,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":-256,"y":32,"width":32,"height":32,"inputConnectorIDs":[8008],"outputSuccessConnectorIDs":[5284],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GDLP Call"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"POST GDLP"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"POST GDLP_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"{\n  \"username\": \"${Altr_service_user_name}\",\n  \"password\": \"${Altr_service_user_password}\",\n  \"account\": \"${snowflake_hostname}\",\n  \"database\": \"${database}\",\n  \"schema\": \"${schema}\",\n  \"table\": \"${table}\",\n  \"row_limit\": 25\n}"}}}},"visible":true,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5279":{"id":5279,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":-128,"y":32,"width":32,"height":32,"inputConnectorIDs":[5284],"outputSuccessConnectorIDs":[5285],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GDLP Result To Grid"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Basic / Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Table Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"/* Note: this query will be run as a subquery for the purposes of sampling the data.\n   As such it will be restricted by any subquery limitations specified by the current platform. */"}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Column_json"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":true,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Order By","elements":{},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Ascending"}}}},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Filter Conditions","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true,"status":{},"columnNames":[]},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5280":{"id":5280,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":24,"y":32,"width":32,"height":32,"inputConnectorIDs":[5285],"outputSuccessConnectorIDs":[7504],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Parse GDLP, get columns to tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"from itertools import chain\n###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\ngridValue = context.getGridVariable('Column_json')\n\nclassifiers = context.getGridVariable('Classifiers_to_tokenize')\nflatten_classifiers = list(chain.from_iterable(classifiers))\n\n\n\n\ncolumns = []\n\nfor finding in gridValue:\n  result = json.loads(finding[0])\n  if result[\"tag\"] in flatten_classifiers:\n    columns.append([result[\"column\"]])\n\n#loop through findings (for each individual text value I believe)\n#for finding in body[\"result\"][\"findings\"]:\n#  classifier = finding[\"infoType\"][\"name\"]\n#  likelihood = finding[\"infoType\"][\"likelihood\"]\n#  \n#  #loop through column location that the text value was in \n#  for location in finding[\"location\"][\"contentLocations\"]:\n#  \tcolumnName = location[\"recordLocation\"][\"fieldId\"][\"name\"]\n#    \n#    #if it is likely or above, and hasn't already been added to the list of columns, add it\n#    if columnName not in columns and likelihood in [\"VERY_LIKELY\", \"LIKELY\"]:\n#      columns.append(columnName)\n\n\ncontext.updateGridVariable('Columns_to_tokenize', columns)\n\n\n\n\n"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5283":{"id":5283,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":176,"y":-128,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get Tagged Columns - Not using"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Basic / Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Advanced"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Table Columns","elements":{},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"/* Note: this query will be run as a subquery for the purposes of sampling the data.\n   As such it will be restricted by any subquery limitations specified by the current platform. */\nselect COLUMN_NAME \n  from table(${database}.information_schema.tag_references_all_columns('${database}.${schema}.${table}', 'table'))\n  WHERE TAG_NAME = 'ALTR_TOKENIZED';"}}}},"visible":true,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"tagged_columns"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"COLUMN_NAME"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Order By","elements":{},"visible":false,"status":{},"columnNames":[]},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Ascending"}}}},"visible":false,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Filter Conditions","elements":{},"visible":false,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":false,"status":{},"columnNames":[]},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5350":{"id":5350,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":192,"y":32,"width":32,"height":32,"inputConnectorIDs":[7504],"outputSuccessConnectorIDs":[7492],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get ALTR DBs"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GET Databases"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GET Databases_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5389":{"id":5389,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":352,"y":32,"width":32,"height":32,"inputConnectorIDs":[7492],"outputSuccessConnectorIDs":[6128],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR DB Result To Grid"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Basic / Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Table Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"/* Note: this query will be run as a subquery for the purposes of sampling the data.\n   As such it will be restricted by any subquery limitations specified by the current platform. */"}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_db_json"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":true,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Order By","elements":{},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Ascending"}}}},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Filter Conditions","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true,"status":{},"columnNames":[]},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5424":{"id":5424,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":-448,"y":240,"width":32,"height":32,"inputConnectorIDs":[7496],"outputSuccessConnectorIDs":[9676],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get ALTR Cols"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GET Data"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GET Data_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5428":{"id":5428,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":-304,"y":240,"width":32,"height":32,"inputConnectorIDs":[9676],"outputSuccessConnectorIDs":[5631],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Col Result To Grid"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Basic / Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Table Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"/* Note: this query will be run as a subquery for the purposes of sampling the data.\n   As such it will be restricted by any subquery limitations specified by the current platform. */"}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_column_json"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":true,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Order By","elements":{},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Ascending"}}}},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Filter Conditions","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true,"status":{},"columnNames":[]},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5466":{"id":5466,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"CONDITIONAL","executionHint":"FLOW","implementationID":-1357378929,"x":-80,"y":240,"width":32,"height":32,"inputConnectorIDs":[9869],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[5819],"outputFalseConnectorIDs":[8862],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"If DB Added to ALTR"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"isDbAdded"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Equal to"},"4":{"slot":4,"type":"STRING","value":"True"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5630":{"id":5630,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":-192,"y":240,"width":32,"height":32,"inputConnectorIDs":[5631],"outputSuccessConnectorIDs":[9869],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Parse ALTR Cols"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n\n\n#[[123, 'Test DB', 'MATILLION_DEMO_ONE'], ...]\ndbInfo = context.getGridVariable('id_to_db_name')\n\n#load in ALTR cols\ngridValue = context.getGridVariable('ALTR_column_json')\nbody = json.loads(gridValue[0][0])\ncolsAdded = body[\"data\"][\"fields\"]\naltrColNames = []\n#filter out columns from wrong db, schema, and table\nfor col in colsAdded:\n  if col[\"databaseId\"] == databaseId and col[\"tableName\"] == schema + \".\" + table:\n    altrColNames.append(col[\"columnName\"])\n\nprint(\"ALTR column names\")\n#[['phone_number'], ['email'], ...]\ntokenizeColumnList = context.getGridVariable('Columns_to_tokenize')\n\n\n\n\n\ncolsToAdd = []\n#loop through tokenize column list\nfor col in tokenizeColumnList:\n  #check if not already added to altr\n  if col[0] not in altrColNames:\n  \t#if not, add to list\n    colsToAdd.append(col)\n\n    \n    \ncontext.updateGridVariable('columns_to_add_to_altr', colsToAdd)\n\n\n\n\n\n\n\n"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5787":{"id":5787,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":80,"y":240,"width":32,"height":32,"inputConnectorIDs":[8862],"outputSuccessConnectorIDs":[11117],"outputFailureConnectorIDs":[11159],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add DB to ALTR"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"POST Database"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"POST Database_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"{\n    \"friendlyDatabaseName\": \"${database}\",\n    \"databaseType\": \"snowflake_external_functions\",\n    \"maxNumberOfConnections\": 5,\n    \"dataUsageHistory\": false,\n    \"hostname\": \"${snowflake_hostname}\",\n    \"databasePort\": 443,\n    \"databaseUsername\": \"${Altr_service_user_name}\",\n    \"databasePassword\": \"${Altr_service_user_password}\",\n    \"databaseName\": \"${database}\",\n    \"warehouseName\": null,\n    \"snowflakeRole\": null\n}"}}}},"visible":true,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"5814":{"id":5814,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":208,"y":336,"width":32,"height":16,"inputConnectorIDs":[5819],"outputSuccessConnectorIDs":[9837],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Grid Iterator 0"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Columns_to_tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"column"},"2":{"slot":2,"type":"STRING","value":"column"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Stop on Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Stop Condition Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":false,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Condition","elements":{},"visible":false,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[6366],"inputIterationConnectorIDs":[]},"5832":{"id":5832,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":400,"y":240,"width":32,"height":16,"inputConnectorIDs":[10436],"outputSuccessConnectorIDs":[9862],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Grid Iterator 0 (1)"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Columns_to_tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"column"},"2":{"slot":2,"type":"STRING","value":"column"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Stop on Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Stop Condition Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":false,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Condition","elements":{},"visible":false,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[9482],"inputIterationConnectorIDs":[]},"6043":{"id":6043,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":-1180878087,"x":208,"y":368,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add and Tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Job Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add and Tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"","elements":{},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ef_database"},"2":{"slot":2,"type":"STRING","value":"${ef_database}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ef_detokenize_name"},"2":{"slot":2,"type":"STRING","value":"${ef_detokenize_name}"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"ef_schema"},"2":{"slot":2,"type":"STRING","value":"${ef_schema}"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"database"},"2":{"slot":2,"type":"STRING","value":"${database}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"schema"},"2":{"slot":2,"type":"STRING","value":"${schema}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"column"},"2":{"slot":2,"type":"STRING","value":"${column}"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"table"},"2":{"slot":2,"type":"STRING","value":"${table}"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"databaseId"},"2":{"slot":2,"type":"STRING","value":"${databaseId}"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_api_key"},"2":{"slot":2,"type":"STRING","value":"${ALTR_api_key}"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_api_secret_name"},"2":{"slot":2,"type":"STRING","value":"${ALTR_api_secret_name}"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"ef_tokenize_name"},"2":{"slot":2,"type":"STRING","value":"${ef_tokenize_name}"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Set Grid Variables","elements":{"1":{"slot":1,"elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"GRID","value":"columns_to_add_to_altr"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"GRID","value":"column"}}}},"values":{"1":{"slot":1,"type":"STRING","value":"columns_to_add_to_altr"},"2":{"slot":2,"type":"STRING","value":"grid"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Melt Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Classifier_tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Melt Package","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"altr.sharedjob.tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Melt Revision","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Melt Load Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DYNAMIC"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[6366]},"6063":{"id":6063,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":496,"y":32,"width":32,"height":32,"inputConnectorIDs":[6128],"outputSuccessConnectorIDs":[7496],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Parse ALTR Dbs"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\ngridValue = context.getGridVariable('ALTR_db_json')\n\n\nbody = json.loads(gridValue[0][0])\n\ndatabases = body[\"data\"][\"databases\"]\nisDbFound = \"False\"\n\nidToName = []\n\n#loop through findings (for each individual text value I believe)\nfor db in databases:\n  #map id to friendly db name\n  idToName.append([str(int(db[\"id\"])), db[\"friendlyDatabaseName\"], db[\"databaseName\"]])\n  if db[\"databaseName\"].lower() == database.lower():\n    isDbFound = \"True\"\n    context.updateVariable('databaseId', db[\"id\"])\n\n\ncontext.updateGridVariable('id_to_db_name', idToName)\ncontext.updateVariable('isDbAdded', isDbFound)"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6452":{"id":6452,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-368,"y":32,"width":32,"height":32,"inputConnectorIDs":[6453],"outputSuccessConnectorIDs":[8008],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create Tag"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATE TAG IF NOT EXISTS ALTR_TOKENIZED \n\tALLOWED_VALUES 'true'; "}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"8982":{"id":8982,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":192,"y":240,"width":32,"height":32,"inputConnectorIDs":[11117],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[10431],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Added DB Result to Grid"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Basic / Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Table Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"/* Note: this query will be run as a subquery for the purposes of sampling the data.\n   As such it will be restricted by any subquery limitations specified by the current platform. */"}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_db_json"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Data Value"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"50"}}}},"visible":true,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Order By","elements":{},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Ascending"}}}},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Filter Conditions","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true,"status":{},"columnNames":[]},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"8984":{"id":8984,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":304,"y":240,"width":32,"height":32,"inputConnectorIDs":[10431],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[10436],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get DB ID"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n\n\ngridValue = context.getGridVariable('ALTR_db_json')\nbody = json.loads(gridValue[0][0])\ncontext.updateVariable('databaseId', body[\"data\"][\"id\"])\n\nidToName = context.getGridVariable('id_to_db_name')\nif idToName is None:\n  context.updateGridVariable('id_to_db_name', [[str(int(body[\"data\"][\"id\"])), body[\"data\"][\"friendlyDatabaseName\"], body[\"data\"][\"databaseName\"]]])\nelse:\n  idToName.append([str(int(body[\"data\"][\"id\"])), body[\"data\"][\"friendlyDatabaseName\"], body[\"data\"][\"databaseName\"]])\n  context.updateGridVariable('id_to_db_name', idToName)\n\n"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"9478":{"id":9478,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":-1180878087,"x":400,"y":272,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add and Tokenize 2"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Job Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add and Tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"","elements":{},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ef_database"},"2":{"slot":2,"type":"STRING","value":"${ef_database}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ef_detokenize_name"},"2":{"slot":2,"type":"STRING","value":"${ef_detokenize_name}"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"ef_schema"},"2":{"slot":2,"type":"STRING","value":"${ef_schema}"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"database"},"2":{"slot":2,"type":"STRING","value":"${database}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"schema"},"2":{"slot":2,"type":"STRING","value":"${schema}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"column"},"2":{"slot":2,"type":"STRING","value":"${column}"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"table"},"2":{"slot":2,"type":"STRING","value":"${table}"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"databaseId"},"2":{"slot":2,"type":"STRING","value":"${databaseId}"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_api_key"},"2":{"slot":2,"type":"STRING","value":"${ALTR_api_key}"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_api_secret_name"},"2":{"slot":2,"type":"STRING","value":"${ALTR_api_secret_name}"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"ef_tokenize_name"},"2":{"slot":2,"type":"STRING","value":"${ef_tokenize_name}"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Set Grid Variables","elements":{"1":{"slot":1,"elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"GRID","value":"columns_to_add_to_altr"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"GRID","value":"column"}}}},"values":{"1":{"slot":1,"type":"STRING","value":"columns_to_add_to_altr"},"2":{"slot":2,"type":"STRING","value":"grid"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Melt Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Classifier_tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Melt Package","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"altr.sharedjob.tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Melt Revision","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Melt Load Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DYNAMIC"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[9482]},"9827":{"id":9827,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":320,"y":336,"width":32,"height":32,"inputConnectorIDs":[9837],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Import Tags"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update DB"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update DB_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"{\n  \"dataUsageHistory\": false,\n  \"shouldClassify\": true,\n  \"classificationType\": 3,\n  \"databaseId\": ${databaseId}\n}"}}}},"visible":true,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"9849":{"id":9849,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":496,"y":240,"width":32,"height":32,"inputConnectorIDs":[9862],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Import Tags 2"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update DB"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update DB_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"{\n  \"dataUsageHistory\": false,\n  \"shouldClassify\": true,\n  \"classificationType\": 3,\n  \"databaseId\": ${databaseId}\n}"}}}},"visible":true,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"11125":{"id":11125,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":-1180878087,"x":400,"y":176,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Add and Tokenize 2"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Job Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add and Tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"","elements":{},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ef_database"},"2":{"slot":2,"type":"STRING","value":"${ef_database}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ef_detokenize_name"},"2":{"slot":2,"type":"STRING","value":"${ef_detokenize_name}"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"ef_schema"},"2":{"slot":2,"type":"STRING","value":"${ef_schema}"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"database"},"2":{"slot":2,"type":"STRING","value":"${database}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"schema"},"2":{"slot":2,"type":"STRING","value":"${schema}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"column"},"2":{"slot":2,"type":"STRING","value":"${column}"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"table"},"2":{"slot":2,"type":"STRING","value":"${table}"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"databaseId"},"2":{"slot":2,"type":"STRING","value":"${databaseId}"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_api_key"},"2":{"slot":2,"type":"STRING","value":"${ALTR_api_key}"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR_api_secret_name"},"2":{"slot":2,"type":"STRING","value":"${ALTR_api_secret_name}"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"ef_tokenize_name"},"2":{"slot":2,"type":"STRING","value":"${ef_tokenize_name}"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Set Grid Variables","elements":{"1":{"slot":1,"elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"GRID","value":"columns_to_add_to_altr"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"GRID","value":"column"}}}},"values":{"1":{"slot":1,"type":"STRING","value":"columns_to_add_to_altr"},"2":{"slot":2,"type":"STRING","value":"grid"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Melt Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Classifier_tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Melt Package","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"altr.sharedjob.tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Melt Revision","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Melt Load Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DYNAMIC"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[11128]},"11126":{"id":11126,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":400,"y":144,"width":32,"height":16,"inputConnectorIDs":[11159],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[11162],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Grid Iterator 0 (2)"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Columns_to_tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"column"},"2":{"slot":2,"type":"STRING","value":"column"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Stop on Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Stop Condition Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":false,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Condition","elements":{},"visible":false,"status":{},"columnNames":[]},"10":{"slot":10,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[11128],"inputIterationConnectorIDs":[]},"11127":{"id":11127,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":512,"y":144,"width":32,"height":32,"inputConnectorIDs":[11162],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Import Tags 2"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update DB"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update DB_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"{\n  \"dataUsageHistory\": false,\n  \"shouldClassify\": true,\n  \"classificationType\": 3,\n  \"databaseId\": ${databaseId}\n}"}}}},"visible":true,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"5284":{"id":5284,"sourceID":5278,"targetID":5279},"5285":{"id":5285,"sourceID":5279,"targetID":5280},"5631":{"id":5631,"sourceID":5428,"targetID":5630},"6128":{"id":6128,"sourceID":5389,"targetID":6063},"7492":{"id":7492,"sourceID":5350,"targetID":5389},"7496":{"id":7496,"sourceID":6063,"targetID":5424},"7504":{"id":7504,"sourceID":5280,"targetID":5350},"8008":{"id":8008,"sourceID":6452,"targetID":5278},"9676":{"id":9676,"sourceID":5424,"targetID":5428},"9837":{"id":9837,"sourceID":5814,"targetID":9827},"9862":{"id":9862,"sourceID":5832,"targetID":9849},"9869":{"id":9869,"sourceID":5630,"targetID":5466},"11117":{"id":11117,"sourceID":5787,"targetID":8982}},"failureConnectors":{"11159":{"id":11159,"sourceID":5787,"targetID":11126}},"unconditionalConnectors":{"6453":{"id":6453,"sourceID":5277,"targetID":6452},"10431":{"id":10431,"sourceID":8982,"targetID":8984},"10436":{"id":10436,"sourceID":8984,"targetID":5832},"11162":{"id":11162,"sourceID":11126,"targetID":11127}},"trueConnectors":{"5819":{"id":5819,"sourceID":5466,"targetID":5814}},"falseConnectors":{"8862":{"id":8862,"sourceID":5466,"targetID":5787}},"iterationConnectors":{"6366":{"id":6366,"sourceID":5814,"targetID":6043},"9482":{"id":9482,"sourceID":5832,"targetID":9478},"11128":{"id":11128,"sourceID":11126,"targetID":11125}},"noteConnectors":{},"canUndo":true,"undoCommand":"Set Job Variables","undoCreated":1677161921537,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{},"variables":{"table":{"definition":{"name":"table","type":"TEXT","scope":"TASKBATCH","description":"Name of the table to tokenize/protect","visibility":"PUBLIC"},"value":null},"column":{"definition":{"name":"column","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PRIVATE"},"value":null},"schema":{"definition":{"name":"schema","type":"TEXT","scope":"TASKBATCH","description":"Name of the schema that the table to tokenize/protect is located in","visibility":"PUBLIC"},"value":null},"database":{"definition":{"name":"database","type":"TEXT","scope":"TASKBATCH","description":"Name of the database that the table to tokenize/protect is located in","visibility":"PUBLIC"},"value":null},"ef_schema":{"definition":{"name":"ef_schema","type":"TEXT","scope":"TASKBATCH","description":"Schema that the tokenization external function is located in","visibility":"PUBLIC"},"value":null},"isDbAdded":{"definition":{"name":"isDbAdded","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PRIVATE"},"value":""},"databaseId":{"definition":{"name":"databaseId","type":"DECIMAL","scope":"TASKBATCH","description":"","visibility":"PRIVATE"},"value":""},"ef_database":{"definition":{"name":"ef_database","type":"TEXT","scope":"TASKBATCH","description":"Database that the Tokenization external function is located in ","visibility":"PUBLIC"},"value":null},"ALTR_api_key":{"definition":{"name":"ALTR_api_key","type":"TEXT","scope":"TASKBATCH","description":"ALTR api key - generated in Settings -> Preferences -> API","visibility":"PUBLIC"},"value":null},"ef_tokenize_name":{"definition":{"name":"ef_tokenize_name","type":"TEXT","scope":"TASKBATCH","description":"Name of the Tokenization external function","visibility":"PUBLIC"},"value":null},"ef_detokenize_name":{"definition":{"name":"ef_detokenize_name","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":null},"snowflake_hostname":{"definition":{"name":"snowflake_hostname","type":"TEXT","scope":"TASKBATCH","description":"Your Snowflake hostname in the format \"example.snowflakecomputing.com\"","visibility":"PUBLIC"},"value":null},"ALTR_api_secret_name":{"definition":{"name":"ALTR_api_secret_name","type":"TEXT","scope":"TASKBATCH","description":"Name of the Project Group Password for the ALTR api secret key   - generated in Settings -> Preferences -> API","visibility":"PUBLIC"},"value":null},"Altr_service_user_name":{"definition":{"name":"Altr_service_user_name","type":"TEXT","scope":"TASKBATCH","description":"The Snowflake username of the ALTR service user","visibility":"PUBLIC"},"value":null},"Altr_service_user_password":{"definition":{"name":"Altr_service_user_password","type":"TEXT","scope":"TASKBATCH","description":"Name of the Project Group Password for the ALTR service user","visibility":"PUBLIC"},"value":null}},"grids":{"Column_json":{"definition":{"name":"Column_json","scope":"BRANCH","definitions":[{"name":"json","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"ALTR_db_json":{"definition":{"name":"ALTR_db_json","scope":"BRANCH","definitions":[{"name":"db_json_body","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"id_to_db_name":{"definition":{"name":"id_to_db_name","scope":"BRANCH","definitions":[{"name":"id","type":"DECIMAL"},{"name":"friendly_name","type":"TEXT"},{"name":"db_name","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"tagged_columns":{"definition":{"name":"tagged_columns","scope":"BRANCH","definitions":[{"name":"tagged_column_name","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"ALTR_column_json":{"definition":{"name":"ALTR_column_json","scope":"BRANCH","definitions":[{"name":"column_json_body","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"Columns_to_tokenize":{"definition":{"name":"Columns_to_tokenize","scope":"TASKBATCH","definitions":[{"name":"column","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"columns_to_add_to_altr":{"definition":{"name":"columns_to_add_to_altr","scope":"BRANCH","definitions":[{"name":"column","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"Classifiers_to_tokenize":{"definition":{"name":"Classifiers_to_tokenize","scope":"BRANCH","definitions":[{"name":"Classifiers","type":"TEXT"}],"description":"","visibility":"PUBLIC"},"values":[{"values":["PERSON_NAME"]},{"values":["EMAIL_ADDRESS"]}]}}},"Add and Tokenize":{"id":-2,"revision":152,"created":1677161927096,"timestamp":1677161927096,"components":{"6026":{"id":6026,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-128,"y":16,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[6337],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Start","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6031":{"id":6031,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":0,"y":16,"width":32,"height":32,"inputConnectorIDs":[6337],"outputSuccessConnectorIDs":[6262],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Tokenize"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"UPDATE \"${database}\".\"${schema}\".\"${table}\" set \"${column}\" = \"${ef_database}\".\"${ef_schema}\".\"${ef_tokenize_name}\"(\"${column}\");"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6261":{"id":6261,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":96,"y":16,"width":32,"height":32,"inputConnectorIDs":[6262],"outputSuccessConnectorIDs":[6306],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Tag Column"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTER TABLE \"${database}\".\"${schema}\".\"${table}\" ALTER COLUMN \"${column}\" SET TAG ALTR_TOKENIZED = 'true';"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6303":{"id":6303,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"CONDITIONAL","executionHint":"FLOW","implementationID":-1357378929,"x":352,"y":16,"width":32,"height":32,"inputConnectorIDs":[8167],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[6351],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"If not added to ALTR"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Simple"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"isColumnAdded"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Equal to"},"4":{"slot":4,"type":"STRING","value":"False"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Condition","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6305":{"id":6305,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":208,"y":16,"width":32,"height":32,"inputConnectorIDs":[6306],"outputSuccessConnectorIDs":[8167],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Save isAddedToALTR"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print (myvar)\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print (context.getGridVariable('mygridvar'))\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\ncolumns_to_add_to_altr = context.getGridVariable('columns_to_add_to_altr')\nprint(columns_to_add_to_altr)\nif [column] in columns_to_add_to_altr:\n  context.updateVariable('isColumnAdded', 'False')\n\n\n\n\n\n\n\n\n"}}}},"visible":true,"status":{},"columnNames":[]},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true,"status":{},"columnNames":[]},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true,"status":{},"columnNames":[]},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6312":{"id":6312,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1043089869,"x":480,"y":16,"width":32,"height":32,"inputConnectorIDs":[6351],"outputSuccessConnectorIDs":[9359],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add Column To ALTR"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"API","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":false,"status":{},"columnNames":[]},"3":{"slot":3,"name":"API Environment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Production"}}}},"visible":false,"status":{},"columnNames":[]},"4":{"slot":4,"name":"API Version","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"default"}}}},"visible":false,"status":{},"columnNames":[]},"5":{"slot":5,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"POST data"}}}},"visible":true,"status":{},"columnNames":[]},"6":{"slot":6,"name":"Auth Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"POST data_auth"}}}},"visible":false,"status":{},"columnNames":[]},"7":{"slot":7,"name":"Api Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"8":{"slot":8,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${ALTR_api_key}"}}}},"visible":true,"status":{},"columnNames":[]},"9":{"slot":9,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"${ALTR_api_secret_name}"}}}},"visible":true,"status":{},"columnNames":[]},"10":{"slot":10,"name":"OAuth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"11":{"slot":11,"name":"Page Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true,"status":{},"columnNames":[]},"12":{"slot":12,"name":"URI Params","elements":{},"visible":true,"status":{},"columnNames":[]},"13":{"slot":13,"name":"Query Params","elements":{},"visible":true,"status":{},"columnNames":[]},"14":{"slot":14,"name":"Header Params","elements":{},"visible":true,"status":{},"columnNames":[]},"15":{"slot":15,"name":"Post Body","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"{\n    \"databaseId\": ${databaseId},\n    \"tableName\": \"${schema}.${table}\",\n    \"columnName\": \"${column}\",\n    \"nickname\": \"${table} ${column}\",\n    \"protectMode\": \"govern\"\n}"}}}},"visible":true,"status":{},"columnNames":[]},"16":{"slot":16,"name":"Api Key Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]},"17":{"slot":17,"name":"Api Key Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"18":{"slot":18,"name":"Bearer Token","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false,"status":{},"columnNames":[]},"22":{"slot":22,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ALTR Endpoints"}}}},"visible":true,"status":{},"columnNames":[]},"113":{"slot":113,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://matillionetlstaging/"}}}},"visible":true,"status":{},"columnNames":[]},"114":{"slot":114,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"115":{"slot":115,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"116":{"slot":116,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true,"status":{},"columnNames":[]},"117":{"slot":117,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API_RESULTS"}}}},"visible":true,"status":{},"columnNames":[]},"118":{"slot":118,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"9358":{"id":9358,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":607,"y":21,"width":32,"height":32,"inputConnectorIDs":[9359],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Edit Masking Policy"}}}},"visible":true,"status":{},"columnNames":[]},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"alter masking policy ${database}.ALTR_DSAAS.\"ALTR_MASKING_POLICY_[${database}].[${schema}].[${table}].[${column}]\" set body ->\n  CASE \n    WHEN TRUE THEN AS_VARCHAR(${ef_database}.${ef_schema}.${ef_detokenize_name}(VALUE, \"${database}\".\"ALTR_DSAAS\".\"ALTR_GOVERN_COLUMN_LAUNCHER_[${database}].[${schema}].[${table}].[${column}]\"(\n        SHA2(CONCAT(\n             COALESCE(LAST_QUERY_ID(),       'null')\n            ,COALESCE(CURRENT_VERSION(),     'null')\n            ,COALESCE(CURRENT_CLIENT(),      'null')\n            ,COALESCE(CURRENT_REGION(),      'null')\n            ,COALESCE(CURRENT_ACCOUNT(),     'null')\n            ,COALESCE(CURRENT_ROLE(),        'null')\n            ,COALESCE(CURRENT_USER(),        'null')\n            ,COALESCE(CURRENT_SESSION(),     'null')\n            ,COALESCE(CURRENT_TRANSACTION(), 'null')\n            ,COALESCE(CURRENT_WAREHOUSE(),   'null')\n            ,COALESCE(CURRENT_DATABASE(),    'null')\n            ,COALESCE(CURRENT_SCHEMA(),      'null')\n            ,COALESCE(CURRENT_STATEMENT(),   'null')\n        ), 256))))\n  END;"}}}},"visible":true,"status":{},"columnNames":[]}},"validationStatus":{},"status":{},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"6262":{"id":6262,"sourceID":6031,"targetID":6261},"6306":{"id":6306,"sourceID":6261,"targetID":6305},"8167":{"id":8167,"sourceID":6305,"targetID":6303},"9359":{"id":9359,"sourceID":6312,"targetID":9358}},"failureConnectors":{},"unconditionalConnectors":{"6337":{"id":6337,"sourceID":6026,"targetID":6031}},"trueConnectors":{"6351":{"id":6351,"sourceID":6303,"targetID":6312}},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"canUndo":true,"undoCommand":"Set Job Variables","undoCreated":1675890427723,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"9323":{"id":9323,"x":610,"y":-94,"width":250,"height":58,"text":"ALTER MASKING POLICY!","colour":"e6e63c"}},"variables":{"table":{"definition":{"name":"table","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"Default"},"column":{"definition":{"name":"column","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"Default"},"schema":{"definition":{"name":"schema","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"Default"},"database":{"definition":{"name":"database","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"Default"},"ef_schema":{"definition":{"name":"ef_schema","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"${ef_schema}"},"databaseId":{"definition":{"name":"databaseId","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"1"},"ef_database":{"definition":{"name":"ef_database","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"${ef_database}"},"ALTR_api_key":{"definition":{"name":"ALTR_api_key","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"${ALTR_api_key}"},"isColumnAdded":{"definition":{"name":"isColumnAdded","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":null},"ef_tokenize_name":{"definition":{"name":"ef_tokenize_name","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"${ef_tokenize_name}"},"Current_Classifier":{"definition":{"name":"Current_Classifier","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"${Current_Classifier}"},"ef_detokenize_name":{"definition":{"name":"ef_detokenize_name","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"${ef_detokenize_name}"},"ALTR_api_secret_name":{"definition":{"name":"ALTR_api_secret_name","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"${ALTR_api_secret_name}"}},"grids":{"Column_json":{"definition":{"name":"Column_json","scope":"BRANCH","definitions":[{"name":"json_body","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]},"columns_to_add_to_altr":{"definition":{"name":"columns_to_add_to_altr","scope":"BRANCH","definitions":[{"name":"column","type":"TEXT"}],"description":"","visibility":"PUBLIC"},"values":[]}}}},"transformationJobs":{}}],"version":"1.67.7","environment":"snowflake"}